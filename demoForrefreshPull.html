<!doctype html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no">
	<title>Document</title>
	<style>
		html{font-size: 100px}
		*{margin:0; padding:0}
		body{
			font-size: 32px;
		}

		#top{
			background-color: #EEE;
		}


		#indexedList {
			height:100%
		}

		ul.list li{
			border: 1px solid #CCC;

		}


		.nu-refreshPull{
			position: absolute;
			top:0;
			left: 1.5rem;
		}
		.nu-refreshPull img{
			width: 0.3rem;
			height: 0.3rem;
		}



	</style>
</head>
<body>

<div class="container" id="indexedList" style="">
	<ul class="list">
	</ul>
</div>

<script src="jquery.js"></script>
<script src="require.js"></script>

<!--报文-->
<script src="json1.js"></script>
<script src="json2.js"></script>
<script>
	var clientH = document.documentElement.clientHeight;
	$("#indexedList").height(clientH);

	require(["./nuui-refreshPull"], function(RefreshPull){
		var timeTools;

		var scroller = new RefreshPull($('#indexedList'), {
			containerSelector:".list",
			enablePullDown:true,
			enablePullUp:true,

			refreshData:function(render){
				timeTools = setTimeout(function(){
					console.log("timeTools");
					console.log("refresh");
					render(data);
				}, 3000);
			},

			loadMoreData:function(render){
				timeTools = setTimeout(function(){
					console.log("timeTools");
					console.log("loadMore");
					render(data2);
				}, 3500);

				setTimeout(function(){
					console.log("超时");
					clearTimeout(timeTools);
					scroller.triggerHide();
				}, 2100);
			},

			dataRenderer:function(data){
				return $("<li>" + data.name + "</li>");
			}
		});
		scroller.triggerRefresh();

	});


</script>

</body>
</html>
